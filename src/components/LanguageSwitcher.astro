---
import { getLocaleFromUrl, getAlternateLocaleUrl, locales, t } from '../i18n/utils';

const locale = getLocaleFromUrl(Astro.url);
---

<div class="relative">
  {locales.map((loc) => {
    const isActive = loc === locale;
    const href = getAlternateLocaleUrl(Astro.url, loc);
    return (
      <a
        href={href}
        class:list={[
          'px-2 py-1 text-sm font-medium rounded transition-colors',
          isActive
            ? 'bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300'
            : 'text-gray-500 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700',
        ]}
        aria-current={isActive ? 'page' : undefined}
      >
        {t(locale, `language.${loc}`)}
      </a>
    );
  })}
</div>
